#老程序问题5_Tec_Encoder_Freertos 
#单电机库移植freertos 
# 单电机库，移植freertos
[Google Gemini](https://gemini.google.com/app/8a04acd640f2d9ed?hl=zh-cn)
1. 结构体定义&extern
2. 任务逻辑错误![[Pasted image 20251023110427.png]]![[Pasted image 20251023105752.png]]
# 原来的程序有问题“5_Tec_Encoder_Freertos”
1. 改后，把tim3作为定时器中断触发测速、计数取消，
	1. 改为freertos中软触发，减少变量，便于调试
	2. 后续可改回，但是freertos中~系统中，会出现衔接问题；不好整

# 增加了简单的串口控制，后续需要优化
[电机库FreeRTOS集成](https://chatgpt.com/c/68f8ba0b-eca0-8324-9603-4b5b171728df)
[电机freertos+串口集成](https://chatgpt.com/c/68f9a99c-1c6c-8321-8cbb-1622002d6f69)
1. 目前只是简单的输入一个数字，三种状态；![[Pasted image 20251023215435.png]]
2. 且判断函数写在了main.c中![[Pasted image 20251023215455.png]]
3. 且一大堆静态变量![[Pasted image 20251023215508.png]]
4. 一大堆extern![[Pasted image 20251023215521.png]]
5. 目前只是持续，无法做到在电机运行指令时中途打断![[Pasted image 20251023215411.png]]