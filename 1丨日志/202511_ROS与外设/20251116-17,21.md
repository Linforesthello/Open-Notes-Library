# 测试stm32f446ret6
#stm32-F446RET6 #stm32 #stm-ST-Link-V2_1 #留存文档不够好，返工遇到问题 #文档注意事项 #stm焊接后测试 #stm调试线固定
1. 删掉了cubemx之前的几个高版本库
	1. ![[Pasted image 20251116110459.png]]
2. 迁移了一个LED程序，并多个.ioc文件生成代码测试
	1. ![[Pasted image 20251116110850.png]]
3. 连接不到目标板；搞了几个小时，最后是线材的问题，
	1. 回调stlink模式
	2. 一开始dio、clk插错
	3. 去找看之前烧录的文档（存在问题，文档留存不仔细【tag缺失】，无法快速查找往期记录）
	4. 最后换线，一次成功
		1. 没绷住
4. 成功实现点灯
	1. swd接口的两排排针，两个gnd都没有问题
5. 开始固定调试用的杜邦线，如图
	1. 用胶条示意
	2. ![[WIN_20251116_12_01_02_Pro.jpg]]

# VMware扩展磁盘，在f开头的一个磁盘软件，搞坏了虚拟机
[扩展磁盘空间管理](https://chatgpt.com/c/69195245-79d0-8324-b5d6-40523bf390f5)
1. 现在在制作ubuntu live usb修复
2. 启动时，"esc"进入boot![[Pasted image 20251116175509.png]]
3. "方向下键"选择”Enter Setup“，进入boot设置![[Pasted image 20251116175630.png]]
4. “方向键”，转到"Boot",选择移动设备无效，后选为"CD-ROM"，有反应，启动了一个小的ubuntu界面，应该就是"ubuntu live"![[Pasted image 20251116175744.png]]

# vscode-cmake开发环境搭建
#开发环境搭建-嵌软
[爽！手把手教你用VSCode开发STM32【大人，时代变啦！！！】_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1QfbpzGENy/?spm_id_from=333.1387.upload.video_card.click&vd_source=5a235430603c11fc80b6352e783631b3)
1. ![[Pasted image 20251116203352.png]]
2. stm32自动下载的工具链，cmake会与原先我设置的clion工具链的cmake冲突
# 给我整的挺崩溃的，又是vmware死了，又是一键下载的stm找不到下载路径，且和clion的搜索范围太广
#崩溃-环境冲突 #VMware死机-更改磁盘
1. clion删掉了
2. cubeclt删掉了
3. stm-vscode工具链删掉了
4. 后面直接运行vscode工具链，暂时不搞clion，（等有jilnk后再配置clion）
5. 删完了，现在硬盘有80~90gb
6. 从头开始

# 优化，vmware建立ubuntu20.04虚拟机，以及建立现有ros硬件开发环境
#VMware-DNS #VMware_Ubuntu20-04ROS配置流程 
[虚拟磁盘文件解释](https://chatgpt.com/c/6919e717-6b80-8324-81ed-c9e5f85b0535)
1. 当前网络环境
	1. clash![[Pasted image 20251117030053.png]]
	2. windows![[Pasted image 20251117030119.png]]
2. 核心、处理器、内存、磁盘选择
3. nat转桥接没dns
	1. 但是可以互相ping主机、网关，浏览器也能正常观看youtube、google；但是网络图标并未显示已连接（gui：云+？）
	2. 如图，“cat /etc/resolv.conf”![[Pasted image 20251117015108.png]]
	3. 如图，“sudo nano /etc/systemd/resolved.conf”
		1. ![[Pasted image 20251117015443.png]]
		2. ![[Pasted image 20251117015329.png]]
		3. ![[Pasted image 20251117015551.png]]
	4. 等待，并reboot
	5. 成功，且gui图标恢复
		1. ![[Pasted image 20251117015733.png]]
		2. 在进行update前，记得切换到手机热点，随身路由发热降频严重（订阅端口、静态ip、网关都要改）
			1. 订阅端口![[Pasted image 20251117015911.png]]
			2. 静态ip、网关![[Pasted image 20251117015955.png]]
			3. 总览图![[Pasted image 20251117020014.png]]
4. 输入法、系统文字设置
	1. 沿用上一次的教程文档（其实刚刚我就在看(●'◡'●)）
	2. ![[Pasted image 20251117020602.png]]
	3. 无法下载fcitx4、fcitx5；系统语言尝试使用原本的ibus
	4. 尝试gemini给出的"[Google Gemini](https://gemini.google.com/app/c1ac103a058e184d)"![[Pasted image 20251117022205.png]]
	5. fcitx5无法下载tool配置，删了
	6. fcitx添加ppa，可以下载；
	7. fcitx配置为空
	8. 原模原样的话，再系统由ibus（terminal运行fcitx提示冲突，“fcitx退出”；后改为fcitx），reboot后，居然又可以下载，猜测就是缺失的fcitx配置（即语言条）![[Pasted image 20251117024434.png]]
		1. “sudo apt install fcitx fcitx-pinyin fcitx-table fcitx-googlepinyin”
	9. 可以看到，fcitx运行无阻碍，且配置成功刷新![[Pasted image 20251117024353.png]]
	10. 个人习惯，改“左shift”![[Pasted image 20251117024604.png]]
	11. 删除ppa仓库
5. 安装ros1,noetic[安装与配置 ROS、VS Code、工具包及虚拟机环境的解决方案与调试](https://chatgpt.com/c/691a1493-12a4-8323-9dd2-18d4a5eb8fe5)
	1. update后，会出现密钥缺失、ppa缺失（如果上一个流程没消掉的话）![[Pasted image 20251117025418.png]]
	2. 解决![[Pasted image 20251117025537.png]]![[Pasted image 20251117025639.png]]
	3. 开始下载ros1noetic-desktop-full
		1. 按照提示下载缺失事项
		2. 常见rosdep init;rosdep update问题![[Pasted image 20251117032457.png]]
		3. ~~==catkin_make报错，没下载->缺包->冲突->一大堆“无用”文件==~~，**6. 绝对不要瞎“autoremove”，现在缺失大量文件，且之前反复验证成立，估计就是autoremove搞没的**![[Pasted image 20251117033045.png]]
		4. remove完就能下载python-pkg了，但是仍然冲突![[Pasted image 20251117033344.png]]
		5. 没见过的，“aptitude”![[Pasted image 20251117033420.png]]
		6. 绝对不要瞎“autoremove”，现在缺失大量文件，且之前反复验证成立，估计就是autoremove搞没的
		7. “sudo apt install ros-noetic-desktop-full”
		8. 成功catkin_make![[Pasted image 20251117043944.png]]
		9. 下载full后，注意更新环境变量“echo "source /opt/ros/noetic/setup.bash" >> ~/.bashrc“”source ~/.bashrc”
		10. 验证“echo $ROS_PACKAGE_PATH”
6. 虚拟机快照+克隆（完整克隆）
7. 在克隆的虚拟机上，部署了工具链
	1. [安装与配置 ROS、VS Code、工具包及虚拟机环境的解决方案与调试](https://chatgpt.com/c/691a1493-12a4-8323-9dd2-18d4a5eb8fe5)
		1. ![[Pasted image 20251117134439.png]]
	2. 常用ros相关包
		1. sudo apt install ros-noetic-catkin-tools
		2. sudo apt install ros-noetic-rosbash
		3. sudo apt install ros-noetic-rviz ros-noetic-roslaunch ros-noetic-rosparam
		4. sudo apt install ros-noetic-rqt ros-noetic-rqt-common-plugins ros-noetic-rqt-robot-steering
		5. sudo apt install ros-noetic-rviz
		6. sudo apt install ros-noetic-gazebo-ros-pkgs
		7. sudo apt install ros-noetic-rqt
		8. sudo apt install ros-noetic-rqt-common-plugins
		9. sudo apt install python3-rosdep
		10. sudo apt install python3-rosinstall
		11. sudo apt install ros-noetic-turtlesim
		12. sudo apt install ros-noetic-navigation
		13. sudo apt install ros-noetic-perception
		14. sudo apt install python3-rospy python3-rosparam
		15. sudo apt install ros-noetic-sensor-msgs
	3. 常用工具 #winSCP #docker #baobab 
		1. openssh->winscp
			1. sudo apt update
			2. sudo apt install openssh-server
			3. sudo systemctl start ssh
			4. sudo systemctl enable ssh
			5. sudo systemctl status ssh
		2. sudo apt install terminator
		3. sudo apt install git
		4. sudo apt install nmap
		5. sudo apt install curl
		6. sudo apt install docker.io
			1. sudo usermod -aG docker $USER
		7. sudo apt install gparted
		8. vscode
			1. sudo dpkg -i code_1.106.0-1762878362_amd64.deb
			2. "The installer would like to add the Microsoft repository andsigning key to update Vs code through apt.Add Microsoft apt repository for Visual Studio Code?"
		9. baobab
8. 完成了ld06的验证 #LD06_ros1noetic 
	1. launch时，不能独自开启roscore（launch会自己开一个）
	2. 并第一次使用了官方的rviz配置文件,说是rviz2跑的，但是ros1rviz也能跑![[Pasted image 20251117143202.png]]
9. ld14p验证完成，同样是rviz-config包 #LD14P_ros1noetic 
	1. launch时，不能独自开启roscore（launch会自己开一个）
	2. 如图![[Pasted image 20251117145159.png]]
10. 保存了快照，并克隆保存到u盘
	1. 绝对不能拿u盘做载体，去跑虚拟机，初始、结尾延迟太大了
11. 尝试扩展磁盘 #VMware-扩展磁盘 
	1. 删掉了快照
	2. 扩充完成后，建立了快照
	3. 果然出了问题，但我这一次有快照
	4. “[Google Gemini](https://gemini.google.com/app/c1ac103a058e184d)”
	5. reboot后，虚拟机改为走esc从HD-card启动（原本为远程设备启动），进入"Try Unubtu"【第一次进入这个界面】![[Pasted image 20251117173723.png]]
	6. 果然没救了，之前chatgpt给出的是垃圾，直接删掉->直接覆盖->直接丢失，真几把绝
	7. 换到gemini，一语道破“[Google Gemini](https://gemini.google.com/app/c1ac103a058e184d)”
	8. 跟随，扩充的话，要进行live中，重启，esc选择第三项，此时底部出现两个图标，再等一下会让选择语言![[Pasted image 20251117180328.png]]
	9. 基本结束，等待开始![[Pasted image 20251117180945.png]]
	10. 确认后，跟随gemini，安全退出；重启虚拟机
	11. 原来grub程序界面长这个样子，终于见到一回，而不是冰冷的“未识别”![[Pasted image 20251117181349.png]]
	12. 成功！![[Pasted image 20251117181606.png]]
12. 安思疆深度摄像机验证 #HP60C_ros1noetic 
	1.   暂未开展，在整理统一采购与教师队伍与场地、工具等等
	2. 20251121，开展
	3. 顺利运行![[Pasted image 20251121133345.png]]
13. astra_pro成功运行 #Astra_Pro_ros1noetic 
	1. ll /dev/astra_pro 查看摄像头usb接口，并赋予权限sudo chmod 666 /dev/bus/usb/003/015![[Pasted image 20251121183511.png]]
	2. 而且，可用包是
	3. ![[Pasted image 20251121183133.png]]
	4. 当开启register融合输出后，出现这句话 #Astra_Pro_ros1noetic-Registered/point ![[Pasted image 20251121183224.png]]
		1. 这是相机没有标定的问题
		2. 解决方法：[系统磁盘空间管理与日志清理、工作空间优化及深度相机配置问题解决](https://chatgpt.com/c/6912e041-0de0-8320-a9d9-795eaa05e226)![[Pasted image 20251121183317.png]]
		3. 将catkin_ws（从卖家给的文档资料中教程）更名为”astra_ws“
			1. 成功![[Pasted image 20251121185619.png]]
		4. 稳定性问题也解决了，就是没有标定；这在正常的相机作用流程中，并不是正确的。所以可能每处都出现问题
	5. 复现文件夹 #复现
		1. ![[Pasted image 20251121190028.png]]
		2. 把这个通过winscp导入到vmware中”~/test“，后续再行mv到/src下| #winSCP ![[Pasted image 20251121190040.png]]